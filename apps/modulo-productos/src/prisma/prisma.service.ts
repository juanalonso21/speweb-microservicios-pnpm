import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';
import { PrismaPg } from '@prisma/adapter-pg';
import { Pool } from 'pg';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {
 constructor() {
   const connectionString = "postgresql://usuario:password@31.220.93.25:5437/speweb_db?schema=public";
   const pool = new Pool({ connectionString });
   const adapter = new PrismaPg(pool);
   super({ adapter });
 }
 async onModuleInit() {
   await this.$connect();
 }


 async onModuleDestroy() {
   await this.$disconnect();
 }
}